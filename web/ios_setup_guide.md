# iOS快捷指令手动创建指南

## 🎯 创建"智能视频下载器"快捷指令

### 第一步：打开快捷指令App
1. 在iOS设备上打开"快捷指令"app
2. 点击右上角的"+"号
3. 点击"添加操作"

### 第二步：添加动作

#### 动作1：获取剪贴板
1. 搜索"获取剪贴板"
2. 添加"获取剪贴板"动作

#### 动作2：格式选择菜单
1. 搜索"从菜单中选择"
2. 添加"从菜单中选择"动作
3. 设置提示文字："选择下载格式"
4. 添加菜单项：
   - 🎬 最佳质量视频
   - 📱 720P视频  
   - 💾 480P视频
   - 🎵 高品质MP3
   - 🎶 标准MP3

#### 动作3-7：文本替换（格式转换）
添加5个"替换文本"动作，分别设置：

**替换1：**
- 查找：🎬 最佳质量视频
- 替换为：video_best

**替换2：**
- 查找：📱 720P视频
- 替换为：video_720

**替换3：**
- 查找：💾 480P视频
- 替换为：video_480

**替换4：**
- 查找：🎵 高品质MP3
- 替换为：audio_320

**替换5：**
- 查找：🎶 标准MP3
- 替换为：audio_192

#### 动作8：条件判断（视频格式）
1. 添加"如果"动作
2. 设置条件：输入 包含 "video"
3. 在"如果"分支中添加：

   **动作8a：获取网页内容（视频下载）**
   - URL：`http://你的服务器IP:8080/api/shortcuts/download-direct`
   - 方法：POST
   - 头部：Content-Type: application/json
   - 请求体类型：JSON
   - JSON内容：
     ```json
     {
       "url": "剪贴板",
       "audio_only": "false",
       "video_quality": "根据选择设置",
       "output_format": "mp4"
     }
     ```

   **动作8b：保存到相册**
   - 添加"保存到相册"动作

4. 在"否则"分支中添加：

   **动作8c：获取网页内容（音频下载）**
   - URL：`http://你的服务器IP:8080/api/shortcuts/download-direct`
   - 方法：POST
   - 头部：Content-Type: application/json
   - 请求体类型：JSON
   - JSON内容：
     ```json
     {
       "url": "剪贴板",
       "audio_only": "true",
       "audio_quality": "根据选择设置",
       "output_format": "mp3"
     }
     ```

   **动作8d：保存到文件**
   - 添加"保存到文件"动作
   - 位置：iCloud Drive/Downloads

### 第三步：配置快捷指令设置
1. 点击右上角的设置图标
2. 设置名称："智能视频下载器"
3. 选择图标：下载图标
4. 颜色：蓝色
5. 启用"在分享表单中显示"
6. 启用"用作Apple Watch复杂功能"

### 第四步：测试快捷指令
1. 复制一个YouTube视频链接
2. 运行快捷指令
3. 选择下载格式
4. 等待下载完成
5. 检查相册或文件app中的下载文件

## 🔧 服务器IP配置

**重要：替换服务器地址**

在所有的"获取网页内容"动作中，将：
```
http://你的服务器IP:8080/api/shortcuts/download-direct
```

替换为你的实际服务器地址，例如：
```
http://192.168.1.100:8080/api/shortcuts/download-direct
```

## 📤 分享快捷指令

### 方法1：生成iCloud链接
1. 在快捷指令列表中，长按你创建的快捷指令
2. 选择"分享"
3. 选择"复制iCloud链接"
4. 将链接分享给其他用户

### 方法2：导出文件
1. 长按快捷指令
2. 选择"分享"
3. 选择"分享文件"
4. 保存为.shortcut文件
5. 上传到你的服务器或云存储

## 🎵 关于音频问题的说明

**下载的视频默认包含音频！**

我们的配置确保：
- 视频下载：`best[vcodec!=none][acodec!=none]` - 确保有视频和音频
- 如果单一格式不可用，会自动合并：`bestvideo+bestaudio`
- 音频下载：`bestaudio` - 提取最佳音频

**格式说明：**
- 🎬 最佳质量视频 = 最高质量的视频+音频
- 📱 720P视频 = 720p分辨率的视频+音频  
- 🎵 高品质MP3 = 320kbps纯音频文件

## 🚀 高级功能

### 添加Siri语音控制
1. 在快捷指令设置中
2. 点击"添加到Siri"
3. 录制语音指令，如"下载视频"

### 添加到主屏幕
1. 在快捷指令设置中
2. 点击"添加到主屏幕"
3. 设置图标和名称

### 批量下载版本
可以创建另一个快捷指令支持：
- 输入多个URL（每行一个）
- 循环下载每个视频
- 显示下载进度

这样你就可以在iOS设备上享受专业级的视频下载体验了！
